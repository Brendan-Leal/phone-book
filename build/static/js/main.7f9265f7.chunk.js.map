{"version":3,"sources":["components/ContactForm.js","components/Contacts.js","components/ErrorNotification.js","components/Filter.js","components/SuccessNotification.js","services/persons.js","App.js","index.js"],"names":["ContactForm","newName","newNumber","onNameChange","onNumberChange","onSubmit","value","onChange","placeholder","type","Contacts","contacts","filterTerm","deletePerson","filter","contact","name","toLowerCase","includes","map","number","onClick","id","ErrorNotification","message","className","Filter","term","SuccessNotification","baseURL","getAll","axios","get","then","res","data","makeNewPerson","newPerson","post","delete","updatePerson","person","put","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilterTerm","successMessage","setSuccessNotification","errorMessage","setErrorMessage","useEffect","personsService","returnedPersons","e","target","preventDefault","some","personToUpdate","find","updatedPerson","window","confirm","p","setTimeout","catch","error","alert","concat","response","newPersons","ReactDOM","render","document","getElementById"],"mappings":"yNAkBeA,EAhBK,SAAC,GAAoE,IAAlEC,EAAiE,EAAjEA,QAASC,EAAwD,EAAxDA,UAAWC,EAA6C,EAA7CA,aAAcC,EAA+B,EAA/BA,eAAgBC,EAAe,EAAfA,SACvE,OACE,uBAAMA,SAAUA,EAAhB,UACE,yCACQ,uBAAOC,MAAOL,EAASM,SAAUJ,OAEzC,2CACU,uBAAOK,YAAa,eAAgBF,MAAOJ,EAAWK,SAAUH,OAE1E,8BACE,wBAAQE,MAAOJ,EAAWO,KAAK,SAA/B,uBCeOC,EAxBE,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,SAAUC,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,aAQxC,OACE,6BAPOF,EAASG,QAAO,SAAAC,GAErB,OADWA,EAAQC,KAAKC,cACZC,SAASN,EAAWK,kBAMjBE,KAAI,SAAAJ,GACjB,OACE,+BACGA,EAAQC,KADX,KACmBD,EAAQK,OACzB,wBAAQC,QAASR,EAAaE,EAAQO,IAAtC,sBAFOP,EAAQC,YCDZO,MAZf,YAAyC,IAAZC,EAAW,EAAXA,QAC3B,OAAe,MAAXA,EACK,KAIP,qBAAKC,UAAU,QAAf,SACGD,KCCQE,EARA,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,KAAMpB,EAAe,EAAfA,SACtB,OACE,mDACkB,uBAAOD,MAAOqB,EAAMpB,SAAUA,QCSrCqB,MAZf,YAA2C,IAAZJ,EAAW,EAAXA,QAC7B,OAAe,MAAXA,EACK,KAIP,qBAAKC,UAAU,UAAf,SACGD,K,gBCPDK,EAAU,eAgCD,OACbC,OA/BF,WACE,OAAOC,IACJC,IAAIH,GACJI,MAAK,SAAAC,GACJ,OAAOA,EAAIC,SA4BfC,cAxBF,SAAuBC,GACrB,OAAON,IACJO,KAAKT,EAASQ,GACdJ,MAAK,SAAAC,GACJ,OAAOA,EAAIC,SAqBftB,aAjBF,SAAsBS,GACpB,OAAOS,IACJQ,OADI,UACMV,EADN,YACiBP,IACrBW,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAenBK,aAZF,SAAsBC,GACpB,OAAOV,IACJW,IADI,UACGb,EADH,YACcY,EAAOnB,IAAMmB,GAC/BR,MAAK,SAAAC,GACJ,OAAOA,EAAIC,UCoHFQ,MAxIf,WACE,MAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA8BF,mBAAS,IAAvC,mBAAO3C,EAAP,KAAgB8C,EAAhB,KACA,EAAkCH,mBAAS,IAA3C,mBAAO1C,EAAP,KAAkB8C,EAAlB,KACA,EAAuCJ,mBAAS,IAAhD,mBAAOhC,EAAP,KAAmBqC,EAAnB,KACA,EAAiDL,mBAAS,MAA1D,mBAAOM,EAAP,KAAuBC,EAAvB,KACA,EAAwCP,mBAAS,MAAjD,mBAAOQ,EAAP,KAAqBC,EAArB,KA+GA,OATAC,qBAAU,WACRC,EACGzB,SACAG,MAAK,SAAAuB,GACJV,EAAWU,QAEd,IAID,gCACE,2CACA,cAAC,EAAD,CAAqBhC,QAAS0B,IAC9B,cAAC,EAAD,CAAmB1B,QAAS4B,IAC5B,cAAC,EAAD,CACEnD,QAASA,EACTC,UAAWA,EACXC,aA1CN,SAA0BsD,GACxBV,EAAWU,EAAEC,OAAOpD,QA0ChBF,eAvCN,SAA4BqD,GAC1BT,EAAaS,EAAEC,OAAOpD,QAuClBD,SAvGN,SAAsBoD,GAGpB,GAFAA,EAAEE,iBAhBKd,EAAQe,MAAK,SAAAnB,GAClB,OAAOA,EAAOzB,OAASf,GAAWwC,EAAOrB,SAAWlB,KAiB7B,CACvB,IAAI2D,EAbChB,EAAQiB,MAAK,SAAArB,GAClB,OAAOA,EAAOzB,OAASf,GAAWwC,EAAOrB,SAAWlB,KAahD6D,EAAa,2BAAQF,GAAR,IAAwBzC,OAAQlB,IAR5C8D,OAAOC,QAAP,UAAkBhE,EAAlB,mFAWHsD,EACGf,aAAauB,GACb9B,MAAK,SAAA8B,GACJjB,EAAWD,EAAQ1B,KAAI,SAAA+C,GACrB,OAAIA,EAAE5C,KAAOyC,EAAczC,GAClByC,EAEAG,MAGXf,EAAuB,wBAAD,OAAyBY,EAAc/C,KAAvC,MACtBmD,YAAW,WACThB,EAAuB,QACtB,QAEJiB,OAAM,SAAAC,GACLhB,EAAgB,mBAAD,OAAoBpD,EAApB,iBACfkE,YAAW,WACTd,EAAgB,QACf,aAIJ,GAAIR,EAAQe,MAAK,SAAAnB,GAAM,OAAIA,EAAOzB,OAASf,KAChDqE,MAAM,GAAD,OAAIrE,EAAJ,qCACA,CACL,IAAMoC,EAAY,CAChBrB,KAAMf,EACNmB,OAAQlB,GAGVqD,EACGnB,cAAcC,GACdJ,MAAK,SAAAuB,GACJV,EAAWD,EAAQ0B,OAAOf,IAC1BT,EAAW,IACXC,EAAa,IACbG,EAAuB,wBAAD,OAAyBK,EAAgBxC,KAAzC,MACtBmD,YAAW,WACThB,EAAuB,QACtB,QAEJiB,OAAM,SAAAC,GACLhB,EAAgBgB,EAAMG,SAASrC,KAAKkC,OACpCF,YAAW,WACTd,EAAgB,QACf,YAmDP,yCACA,cAAC,EAAD,CAAQ1B,KAAMf,EAAYL,SAvC9B,SAA4BkD,GAC1BR,EAAiBQ,EAAEC,OAAOpD,MAAMW,kBAuC9B,cAAC,EAAD,CAAUJ,aApCiB,SAACS,GAC9B,OAAO,WACL,IAAMmD,EAAa5B,EAAQ/B,QAAO,SAAAoD,GAAC,OAAIA,EAAE5C,KAAOA,KAC5C0C,OAAOC,QAAQ,0CACjBV,EACG1C,aAAaS,GACbW,MAAK,WACJa,EAAW2B,QA6B+B9D,SAAUkC,EAASjC,WAAYA,QCzIrF8D,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.7f9265f7.chunk.js","sourcesContent":["import React from \"react\";\n\nconst ContactForm = ({ newName, newNumber, onNameChange, onNumberChange, onSubmit }) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input value={newName} onChange={onNameChange} />\n      </div>\n      <div>\n        number: <input placeholder={\"555-555-5555\"} value={newNumber} onChange={onNumberChange} />\n      </div>\n      <div>\n        <button value={newNumber} type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default ContactForm;","import { React } from \"react\";\n\n\nconst Contacts = ({ contacts, filterTerm, deletePerson }) => {\n  function applyFilter() {\n    return contacts.filter(contact => {\n      let name = contact.name.toLowerCase();\n      return name.includes(filterTerm.toLowerCase());\n    });\n  }\n\n  return (\n    <ul>\n      {applyFilter().map(contact => {\n        return (\n          <li key={contact.name}>\n            {contact.name}: {contact.number}\n            <button onClick={deletePerson(contact.id)}>\n              Delete\n            </button>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport default Contacts;","import React from \"react\";\n\nfunction ErrorNotification({ message }) {\n  if (message == null) {\n    return null;\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  );\n}\n\nexport default ErrorNotification;","import { React } from \"react\";\n\nconst Filter = ({ term, onChange }) => {\n  return (\n    <div>\n      Filter By Name: <input value={term} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default Filter;","import React from \"react\";\n\nfunction SuccessNotification({ message }) {\n  if (message == null) {\n    return null;\n  }\n\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  );\n}\n\nexport default SuccessNotification;","import axios from \"axios\";\n\nconst baseURL = \"/api/persons\";\n\nfunction getAll() {\n  return axios\n    .get(baseURL)\n    .then(res => {\n      return res.data;\n    });\n}\n\nfunction makeNewPerson(newPerson) {\n  return axios\n    .post(baseURL, newPerson)\n    .then(res => {\n      return res.data;\n    });\n}\n\nfunction deletePerson(id) {\n  return axios\n    .delete(`${baseURL}/${id}`)\n    .then(res => res.data);\n}\n\nfunction updatePerson(person) {\n  return axios\n    .put(`${baseURL}/${person.id}`, person)\n    .then(res => {\n      return res.data;\n    });\n}\n\nexport default {\n  getAll,\n  makeNewPerson,\n  deletePerson,\n  updatePerson,\n};","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport ContactForm from \"./components/ContactForm.js\";\nimport Contacts from \"./components/Contacts.js\";\nimport ErrorNotification from './components/ErrorNotification';\nimport Filter from \"./components/Filter.js\";\nimport SuccessNotification from './components/SuccessNotification';\nimport personsService from \"./services/persons.js\";\n\n\nfunction App() {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterTerm, setNewFilterTerm] = useState(\"\");\n  const [successMessage, setSuccessNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  function _isExistingPerson() {\n    return persons.some(person => {\n      return person.name === newName && person.number !== newNumber;\n    });\n  }\n\n  function _findPersonToUpdate() {\n    return persons.find(person => {\n      return person.name === newName && person.number !== newNumber;\n    });\n  }\n\n  function _userConfimationToUpdate() {\n    return window.confirm(`${newName} is already in the phonebook do you want to update that persons phone number?`);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (_isExistingPerson()) {\n      let personToUpdate = _findPersonToUpdate();\n      let updatedPerson = { ...personToUpdate, number: newNumber };\n\n      if (_userConfimationToUpdate()) {\n        personsService\n          .updatePerson(updatedPerson)\n          .then(updatedPerson => {\n            setPersons(persons.map(p => {\n              if (p.id === updatedPerson.id) {\n                return updatedPerson;\n              } else {\n                return p;\n              }\n            }));\n            setSuccessNotification(`Successfully updated ${updatedPerson.name} `);\n            setTimeout(() => {\n              setSuccessNotification(null);\n            }, 6000);\n          })\n          .catch(error => {\n            setErrorMessage(`Already removed ${newName} from server`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n\n      }\n    } else if (persons.some(person => person.name === newName)) {\n      alert(`${newName} is already in the phonebook`);\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n\n      personsService\n        .makeNewPerson(newPerson)\n        .then(returnedPersons => {\n          setPersons(persons.concat(returnedPersons));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setSuccessNotification(`Successfully created ${returnedPersons.name} `);\n          setTimeout(() => {\n            setSuccessNotification(null);\n          }, 3000);\n        })\n        .catch(error => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 10000);\n        });\n    }\n  }\n\n  function handleNameChange(e) {\n    setNewName(e.target.value);\n  };\n\n  function handleNumberChange(e) {\n    setNewNumber(e.target.value);\n  };\n\n  function handleFilterChange(e) {\n    setNewFilterTerm(e.target.value.toLowerCase());\n  }\n\n  const handleDeletionOfPerson = (id) => {\n    return () => {\n      const newPersons = persons.filter(p => p.id !== id);\n      if (window.confirm(\"Are you sure you want to delete them?\")) {\n        personsService\n          .deletePerson(id)\n          .then(() => {\n            setPersons(newPersons);\n          });\n      }\n    };\n  };\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(returnedPersons => {\n        setPersons(returnedPersons);\n      });\n  }, []);\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <SuccessNotification message={successMessage} />\n      <ErrorNotification message={errorMessage} />\n      <ContactForm\n        newName={newName}\n        newNumber={newNumber}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n        onSubmit={handleSubmit}\n      />\n      <h2>Numbers</h2>\n      <Filter term={filterTerm} onChange={handleFilterChange} />\n      <Contacts deletePerson={handleDeletionOfPerson} contacts={persons} filterTerm={filterTerm} />\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}